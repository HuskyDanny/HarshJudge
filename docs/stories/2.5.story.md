# Story 2.5: Create Run Skill

## Status

Done

## Story

**As a** Claude Code user,
**I want** a run skill that defines test execution protocol,
**so that** Claude captures complete evidence consistently.

## Acceptance Criteria

1. `skills/harshjudge/tasks/run-scenario.md` created as executable task workflow
2. Task triggers defined in `skill.yaml` for: "run scenario", "execute test", "run {scenario-name}"
3. Task creates and updates `skill-state.yaml` in run directory for progress tracking
4. `skills/harshjudge/checklists/pre-run-checklist.md` created for pre-execution validation
5. `skills/harshjudge/checklists/evidence-checklist.md` created to enforce evidence capture
6. `skills/harshjudge/data/error-protocols.md` created with error handling procedures
7. Task defines 5-phase execution protocol with state tracking
8. Task handles Playwright MCP errors gracefully with retry logic

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-05 | 1.0 | Initial story, implementation & QA | SM/Dev/QA Agent |

---

## Dev Agent Record

**Implementation Date:** 2025-12-05

**Files Modified:**
- `skills/harshjudge/tasks/run-scenario.md` - Complete 5-phase execution protocol
- `skills/harshjudge/checklists/pre-run-checklist.md` - 12 validation items
- `skills/harshjudge/checklists/evidence-checklist.md` - Per-step evidence validation
- `skills/harshjudge/data/error-protocols.md` - Comprehensive error handling

**Implementation Details:**

1. **run-scenario.md:**
   - Phase 1: Initialize (validate, start run, create skill-state.yaml)
   - Phase 2: Execute Steps (for each step: update state, execute Playwright, capture evidence)
   - Phase 3: Database Verification (optional)
   - Phase 4: Error Protocol (comprehensive diagnostics capture)
   - Phase 5: Success Protocol (complete run, finalize state)
   - Clear rules section enforcing behavior

2. **pre-run-checklist.md:**
   - Environment validation (app running, MCP available)
   - Scenario validation (file exists, structure valid)
   - State preparation (directory access)
   - Prerequisites check

3. **evidence-checklist.md:**
   - Screenshot capture requirements
   - Evidence recording requirements
   - State tracking requirements
   - Error evidence requirements

4. **error-protocols.md:**
   - 8-step error handling protocol
   - Common error categories (Playwright, Assertion, System)
   - Diagnostic focus for each error type
   - Recovery options

---

## QA Results

**QA Date:** 2025-12-05
**Status:** PASSED

| AC # | Criteria | Status |
|------|----------|--------|
| 1 | run-scenario.md as executable task | ✅ PASS |
| 2 | Triggers defined in skill.yaml | ✅ PASS |
| 3 | skill-state.yaml tracking | ✅ PASS |
| 4 | pre-run-checklist.md | ✅ PASS |
| 5 | evidence-checklist.md | ✅ PASS |
| 6 | error-protocols.md | ✅ PASS |
| 7 | 5-phase execution protocol | ✅ PASS |
| 8 | Error handling procedures | ✅ PASS |
