# Story 2.2: Create Setup Skill

## Status

Done

## Story

**As a** Claude Code user,
**I want** a setup skill that guides me through installation,
**so that** I can configure HarshJudge correctly.

## Acceptance Criteria

1. `skills/harshjudge/tasks/setup-project.md` created as executable task workflow
2. Task triggers defined in `skill.yaml` for: "setup harshjudge", "configure harshjudge", "install harshjudge"
3. Task defines sequential steps with checkpoints:
   - Step 1: Verify Node.js version (>= 18)
   - Step 2: Verify/Install MCP server
   - Step 3: Configure Claude Code MCP settings
   - Step 4: Verify Playwright MCP availability
   - Step 5: Initialize project with `initProject` tool
   - Step 6: Verify setup with `getStatus` tool
4. `skills/harshjudge/checklists/setup-checklist.md` created for validation
5. Task includes troubleshooting section with common issues and resolutions
6. Task outputs success confirmation with environment summary

## Technical References

- **Architecture:** `docs/architecture/appendix-a-claude-skill-templates.md`
- **MCP Tools:** `docs/architecture/5-api-specification-mcp-tools.md` (initProject, getStatus)
- **Existing Placeholder:** `skills/harshjudge/tasks/setup-project.md`
- **Existing Checklist:** `skills/harshjudge/checklists/setup-checklist.md`

## Tasks / Subtasks

- [ ] **Task 1: Implement setup-project.md task workflow** (AC: 1, 3)
  - [ ] Add Purpose section describing task goal
  - [ ] Add Triggers section listing activation phrases
  - [ ] Implement Phase 1: Environment Validation
    - Step 1: Check Node.js version >= 18
    - Step 2: Verify npm/pnpm availability
  - [ ] Implement Phase 2: MCP Server Setup
    - Step 3: Check/install @harshjudge/mcp-server
    - Step 4: Provide Claude Code MCP configuration snippet
  - [ ] Implement Phase 3: Playwright Verification
    - Step 5: Verify Playwright MCP is configured
    - Step 6: Test browser_snapshot tool availability
  - [ ] Implement Phase 4: Project Initialization
    - Step 7: Call `initProject` MCP tool
    - Step 8: Verify `.harshJudge/` directory created
  - [ ] Implement Phase 5: Verification
    - Step 9: Call `getStatus` tool
    - Step 10: Output environment summary

- [ ] **Task 2: Update skill.yaml activation triggers** (AC: 2)
  - [ ] Add "setup harshjudge" to keywords (if not present)
  - [ ] Add "configure harshjudge" to keywords
  - [ ] Add "install harshjudge" to keywords
  - [ ] Verify `/harshjudge:setup` command mapping exists

- [ ] **Task 3: Implement setup-checklist.md** (AC: 4)
  - [ ] Add Pre-Setup Validation section
    - Node.js version check
    - Package manager availability
    - Git repository check
  - [ ] Add MCP Server Validation section
    - HarshJudge MCP installed
    - Playwright MCP configured
    - Claude Code settings updated
  - [ ] Add Project Initialization section
    - .harshJudge/ directory created
    - config.yaml generated
    - .gitignore created
  - [ ] Add Post-Setup Verification section
    - getStatus tool responds
    - No console errors

- [ ] **Task 4: Add troubleshooting section** (AC: 5)
  - [ ] Document common issues:
    - Node.js version too old
    - MCP server not found
    - Playwright not installed
    - Permission errors
    - Claude Code MCP config issues
  - [ ] Provide resolution steps for each issue
  - [ ] Include diagnostic commands

- [ ] **Task 5: Define success output format** (AC: 6)
  - [ ] Create environment summary template:
    - Node.js version
    - MCP servers status
    - Project path
    - Config file location
  - [ ] Include next steps guidance

## Dev Notes

### Task Workflow Structure

The setup-project.md should follow this structure:

```markdown
# Setup Project Task

## Purpose
{Description of what this task accomplishes}

## Triggers
- "setup harshjudge"
- "configure harshjudge"
- "install harshjudge"
- `/harshjudge:setup`

## Sequential Task Execution

### Phase 1: Environment Validation
{Steps with verification checkpoints}

### Phase 2: MCP Server Setup
{Steps with verification checkpoints}

### Phase 3: Playwright Verification
{Steps with verification checkpoints}

### Phase 4: Project Initialization
{Steps using MCP tools}

### Phase 5: Verification & Summary
{Final checks and output}

## Troubleshooting
{Common issues and resolutions}

## Rules
- Complete all phases sequentially
- Stop on critical errors
- Always output final status
```

### MCP Configuration Example

For Claude Code MCP settings (claude_desktop_config.json):

```json
{
  "mcpServers": {
    "harshjudge": {
      "command": "npx",
      "args": ["@harshjudge/mcp-server"]
    },
    "playwright": {
      "command": "npx",
      "args": ["@anthropic/mcp-playwright"]
    }
  }
}
```

## Dependencies

- **Blocked by:** Story 2.0, 2.1 (skill structure and definition)
- **Blocks:** None (independent skill)

## Definition of Done

- [ ] setup-project.md contains complete task workflow
- [ ] All 6 sequential steps documented with checkpoints
- [ ] setup-checklist.md contains validation items
- [ ] Troubleshooting section covers common issues
- [ ] Success output format defined
- [ ] skill.yaml triggers verified

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-05 | 1.0 | Initial story | SM Agent (Bob) |

---

## Dev Agent Record

**Implementation Date:** 2025-12-05

**Files Modified:**
- `skills/harshjudge/tasks/setup-project.md` - Complete task workflow implementation
- `skills/harshjudge/checklists/setup-checklist.md` - Full validation checklist

**Implementation Details:**

1. **setup-project.md Task Workflow:**
   - Purpose and Triggers sections
   - 5 Phases with 10 sequential steps
   - Phase 1: Environment Validation (Node.js, package manager)
   - Phase 2: MCP Server Setup (install, configure)
   - Phase 3: Playwright Verification
   - Phase 4: Project Initialization (initProject, verify structure)
   - Phase 5: Verification & Summary (getStatus, output format)
   - Comprehensive troubleshooting section (5 common issues)
   - Rules section for execution behavior

2. **setup-checklist.md:**
   - Pre-Setup Validation (3 items)
   - MCP Server Validation (4 items)
   - Project Initialization (5 items)
   - Post-Setup Verification (3 items)
   - Summary table and pass criteria

**Note:** AC #2 (additional keywords in skill.yaml) - The activation triggers already exist in skill.yaml. The current keywords and commands cover the trigger phrases. No additional changes needed as "/harshjudge:setup" command is already mapped.

---

## QA Results

**QA Date:** 2025-12-05
**Status:** PASSED

### Acceptance Criteria Verification

| AC # | Criteria | Status |
|------|----------|--------|
| 1 | setup-project.md as executable task workflow | ✅ PASS |
| 2 | Triggers defined in skill.yaml | ✅ PASS |
| 3 | Sequential steps with checkpoints | ✅ PASS |
| 4 | setup-checklist.md for validation | ✅ PASS |
| 5 | Troubleshooting section | ✅ PASS |
| 6 | Success output with environment summary | ✅ PASS |

### Implementation Quality

- **Task Structure:** 5 phases, 10 steps with clear checkpoints
- **Checklist Coverage:** 15 validation items, clear pass criteria
- **Troubleshooting:** 5 common issues with resolution steps
- **Output Format:** Professional ASCII-art summary box
