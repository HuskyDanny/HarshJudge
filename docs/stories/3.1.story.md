# Story 3.1: Set Up UX Package with Vite + React + TailwindCSS

## Status

Done

## Story

**As a** developer,
**I want** a properly scaffolded UX package with modern tooling,
**so that** I can efficiently build the dashboard interface.

## Acceptance Criteria

1. `packages/ux` initialized with Vite, React 18, and TypeScript
2. TailwindCSS configured with custom theme extending default palette
3. Dark mode as default with CSS variables for theme switching
4. Path aliases configured (`@/components`, `@/hooks`, `@/lib`)
5. ESLint + Prettier integrated with project-wide rules
6. Development server runs on configurable port (default 5173)
7. Production build outputs static files to `dist/`
8. Basic `App.tsx` renders "HarshJudge Dashboard" placeholder
9. Package scripts: `dev`, `build`, `preview`, `lint`

## Tasks / Subtasks

- [ ] Task 1: Convert existing UX package to Vite project (AC: 1, 6, 7)
  - [ ] Install Vite and required plugins (`vite`, `@vitejs/plugin-react`)
  - [ ] Create `vite.config.ts` with React plugin
  - [ ] Create `index.html` entry point in package root
  - [ ] Update `package.json` scripts for Vite (`dev`, `build`, `preview`)
  - [ ] Configure Vite server port (default 5173)
  - [ ] Verify `dist/` output structure for production build

- [ ] Task 2: Set up React 18 with TypeScript (AC: 1, 8)
  - [ ] Install React 18 and React-DOM (`react`, `react-dom`)
  - [ ] Create `src/main.tsx` as Vite entry point
  - [ ] Create `src/App.tsx` with "HarshJudge Dashboard" placeholder text
  - [ ] Update `tsconfig.json` for JSX and React settings
  - [ ] Verify development server renders placeholder

- [ ] Task 3: Configure TailwindCSS with dark mode (AC: 2, 3)
  - [ ] Install TailwindCSS and dependencies (`tailwindcss`, `postcss`, `autoprefixer`)
  - [ ] Create `tailwind.config.js` with custom theme extension
  - [ ] Create `postcss.config.js` for PostCSS pipeline
  - [ ] Create `src/styles/globals.css` with Tailwind directives
  - [ ] Configure dark mode as class-based with `darkMode: 'class'`
  - [ ] Add CSS variables for theme switching
  - [ ] Set dark mode as default in App.tsx (add `dark` class to root)

- [ ] Task 4: Configure path aliases (AC: 4)
  - [ ] Update `vite.config.ts` with resolve aliases
  - [ ] Update `tsconfig.json` with path mappings
  - [ ] Configure aliases: `@/components`, `@/hooks`, `@/lib`, `@/services`, `@/styles`
  - [ ] Verify import resolution works in both IDE and build

- [ ] Task 5: Integrate ESLint + Prettier (AC: 5, 9)
  - [ ] Verify ESLint integration with project-wide config
  - [ ] Verify Prettier integration
  - [ ] Add React-specific ESLint rules (`eslint-plugin-react`, `eslint-plugin-react-hooks`)
  - [ ] Ensure `lint` script works correctly

- [ ] Task 6: Create initial component structure (AC: 8)
  - [ ] Create empty directories per architecture: `components/`, `hooks/`, `services/`, `lib/`
  - [ ] Create placeholder `index.ts` exports in each directory
  - [ ] Verify project builds without errors

- [ ] Task 7: Write basic component test (AC: 1)
  - [ ] Configure Vitest for React component testing with jsdom
  - [ ] Install `@testing-library/react` and `@testing-library/jest-dom`
  - [ ] Write basic App.tsx render test
  - [ ] Verify `pnpm test` passes

## Dev Notes

### Previous Story Insights
- Epic 2 completed Claude skill architecture (not directly relevant to this frontend story)
- `packages/ux` currently exists as TypeScript-only scaffold with no Vite/React setup
- Current `src/main.tsx` is empty export placeholder

### Project Structure
[Source: architecture/11-unified-project-structure.md]

```
packages/ux/                           # @harshjudge/ux
├── src/
│   ├── components/
│   │   ├── layout/
│   │   ├── panels/
│   │   ├── viewers/
│   │   └── common/
│   ├── hooks/
│   ├── services/
│   ├── lib/
│   ├── styles/
│   │   └── globals.css
│   ├── App.tsx
│   └── main.tsx
├── public/
│   └── favicon.ico
├── tests/
├── index.html
├── vite.config.ts
├── tailwind.config.js
├── postcss.config.js
├── package.json
└── tsconfig.json
```

### Tech Stack Requirements
[Source: architecture/3-tech-stack.md]

| Technology | Version | Purpose |
|------------|---------|---------|
| React | 18+ | Dashboard UI |
| Vite | 5+ | Frontend bundling and dev server |
| TailwindCSS | 3.4+ | Utility-first CSS |
| TypeScript | 5.3+ | Type safety |
| Vitest | 1+ | Unit and integration tests |

### Frontend Architecture Patterns
[Source: architecture/9-frontend-architecture.md]

- **State Management:** React useState + useReducer (no external library)
- **Component Organization:** `components/` with subdirectories for layout, panels, viewers, common
- **Hooks:** Custom hooks encapsulate data fetching and subscription logic
- **Types:** Import from `@harshjudge/shared` workspace package

### Component Template
[Source: architecture/9-frontend-architecture.md#component-template]

```typescript
import { type FC } from 'react';
import { type SomeType } from '@harshjudge/shared';

interface ComponentProps {
  // props
}

export const Component: FC<ComponentProps> = ({ /* props */ }) => {
  return (
    <div className="flex flex-col h-full">
      {/* content */}
    </div>
  );
};
```

### Coding Standards
[Source: architecture/16-coding-standards.md]

| Element | Convention | Example |
|---------|------------|---------|
| React Components | PascalCase | `ProjectListPanel.tsx` |
| React Hooks | camelCase with 'use' | `useProjects.ts` |
| File Names | kebab-case | `file-system-service.ts` |
| CSS Classes | kebab-case (Tailwind) | `bg-gray-800` |

### Type Sharing Rule
[Source: architecture/16-coding-standards.md#161-critical-fullstack-rules]

- Always define types in `packages/shared` and import from `@harshjudge/shared`
- Current dependency already configured: `"@harshjudge/shared": "workspace:*"`

### Testing

**Test Location:** `packages/ux/tests/`
[Source: architecture/15-testing-strategy.md#dashboard-tests]

```
packages/ux/tests/
├── components/
├── hooks/
└── services/
```

**Testing Framework:** Vitest with jsdom environment
[Source: architecture/3-tech-stack.md]

**Dashboard Component Test Example:**
[Source: architecture/15-testing-strategy.md#dashboard-component-test]

```typescript
import { describe, it, expect, vi } from 'vitest';
import { render, screen, fireEvent } from '@testing-library/react';
import { Component } from '../../src/components/Component';

describe('Component', () => {
  it('renders correctly', () => {
    render(<Component />);
    expect(screen.getByText('Expected Text')).toBeInTheDocument();
  });
});
```

**Current Vitest Config Exists:** `packages/ux/vitest.config.ts` - needs jsdom environment configuration

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-05 | 1.0 | Initial story draft | SM Agent |
| 2025-12-05 | 1.1 | Implementation completed | Dev Agent |

---

## Dev Agent Record

**Implementation Date:** 2025-12-05

**Files Created/Modified:**

- `packages/ux/package.json` - Updated with Vite, React 18, TailwindCSS dependencies
- `packages/ux/vite.config.ts` - Vite configuration with React plugin and path aliases
- `packages/ux/index.html` - HTML entry point with dark mode default
- `packages/ux/tailwind.config.js` - TailwindCSS config with custom theme and dark mode
- `packages/ux/postcss.config.js` - PostCSS configuration
- `packages/ux/tsconfig.json` - Updated with path aliases
- `packages/ux/vitest.config.ts` - Updated for React component testing
- `packages/ux/src/main.tsx` - React entry point
- `packages/ux/src/App.tsx` - Main App component with placeholder
- `packages/ux/src/styles/globals.css` - Global styles with CSS variables
- `packages/ux/src/components/index.ts` - Component exports placeholder
- `packages/ux/src/components/layout/index.ts` - Layout components placeholder
- `packages/ux/src/components/panels/index.ts` - Panel components placeholder
- `packages/ux/src/components/viewers/index.ts` - Viewer components placeholder
- `packages/ux/src/components/common/index.ts` - Common components placeholder
- `packages/ux/src/hooks/index.ts` - Hooks placeholder
- `packages/ux/src/services/index.ts` - Services placeholder
- `packages/ux/src/lib/index.ts` - Library utilities placeholder
- `packages/ux/tests/setup.ts` - Test setup with jest-dom
- `packages/ux/tests/App.test.tsx` - App component test

**Completion Notes:**

1. Successfully converted UX package from TypeScript-only to full Vite + React + TailwindCSS setup
2. All path aliases configured and working (`@/components`, `@/hooks`, `@/lib`, `@/services`, `@/styles`)
3. Dark mode set as default via `class="dark"` on HTML root element
4. CSS variables configured for theme switching support
5. Custom theme extends default Tailwind palette with status colors
6. Tests pass: 2 passing tests in App.test.tsx
7. Build succeeds: outputs to dist/ (143KB JS, 6KB CSS gzipped)
8. Package scripts working: `dev`, `build`, `preview`, `lint`, `test`

**Verification Results:**
- `pnpm test` → 2 tests passed
- `pnpm build` → Success (dist/ created)
- `pnpm lint` → No errors

---

## QA Results

**QA Date:** 2025-12-05
**Status:** PASSED

| AC # | Criteria | Status |
|------|----------|--------|
| 1 | Vite + React 18 + TypeScript setup | ✅ PASS |
| 2 | TailwindCSS with custom theme | ✅ PASS |
| 3 | Dark mode default + CSS variables | ✅ PASS |
| 4 | Path aliases configured | ✅ PASS |
| 5 | ESLint + Prettier integrated | ✅ PASS |
| 6 | Dev server port configurable | ✅ PASS |
| 7 | Production build to dist/ | ✅ PASS |
| 8 | App.tsx renders placeholder | ✅ PASS |
| 9 | Package scripts complete | ✅ PASS |
